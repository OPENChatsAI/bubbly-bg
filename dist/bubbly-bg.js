window.bubbly=function(t={}){t=generateConfig(t);const e=[];for(let n=0;n<t.bubbles;n++){let n=t.radiusFunc();const a=document.createElement("canvas");a.width=a.height=2*n+t.padding;const i=a.getContext("2d");i.shadowColor=t.shadowColor,i.shadowBlur=t.blur,i.fillStyle=t.fillFunc(),i.beginPath(),i.arc(n+t.padding/2,n+t.padding/2,n,0,2*Math.PI),i.fill(),e.push({img:createImage(a),r:n+t.padding,x:Math.random()*t.cv.width,y:Math.random()*t.cv.height,a:t.angleFunc(),v:t.velocityFunc()})}!function n(){t.animate&&requestAnimationFrame(n),t.ctx.globalCompositeOperation="source-over",t.ctx.fillStyle=t.gradient,t.ctx.fillRect(0,0,t.cv.width,t.cv.height),t.ctx.globalCompositeOperation=t.compose,e.forEach((e=>{t.ctx.drawImage(e.img,e.x-e.r,e.y-e.r),e.x+=Math.cos(e.a)*e.v,e.y+=Math.sin(e.a)*e.v,e.x-e.r>t.cv.width&&(e.x=-e.r),e.x+e.r<0&&(e.x=t.cv.width+e.r),e.y-e.r>t.cv.height&&(e.y=-e.r),e.y+e.r<0&&(e.y=t.cv.height+e.r)}))}()};const createImage=t=>{const e=new Image;return e.src=t.toDataURL(),e};function generateConfig(t){let e=t.canvas||(()=>{let t=document.createElement("canvas");return t.setAttribute("style","position:fixed;z-index:-1;left:0;top:0;min-width:100vw;min-height:100vh;"),t.width=window.innerWidth,t.height=window.innerHeight,document.body.appendChild(t),t})();const n=Object.assign({cv:e,bubbles:Math.floor(.02*(e.width+e.height)),compose:"lighter",blur:4,shadowColor:"#fff",radiusFunc:()=>4+Math.random()*window.innerWidth/25,fillFunc:()=>`hsla(0, 0%, 100%, ${.1*Math.random()})`,angleFunc:()=>Math.random()*Math.PI*2,velocityFunc:()=>.1+.5*Math.random(),animate:!1!==t.animate,ctx:e.getContext("2d"),gradient:e.getContext("2d").createLinearGradient(0,0,e.width,e.height)},t);return n.padding=2*n.blur,n.gradient.addColorStop(0,t.colorStart||"#2AE"),n.gradient.addColorStop(1,t.colorStop||"#17B"),n}