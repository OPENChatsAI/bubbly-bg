window.bubbly=function(t={}){t=generateConfig(t);const e=()=>{let e=t.radiusFunc();const n=document.createElement("canvas");n.width=n.height=2*e+t.padding;const i=n.getContext("2d");i.shadowColor=t.shadowColor,i.shadowBlur=t.shadowBlur,i.fillStyle=t.fillFunc(),i.beginPath(),i.arc(e+t.padding/2,e+t.padding/2,e,0,2*Math.PI),i.fill(),a.push({img:createImage(n),r:e+t.padding,x:Math.random()*t.cv.width,y:Math.random()*t.cv.height,a:t.angleFunc(),v:t.velocityFunc()})};let a=[];for(let a=0;a<t.bubbles;a++)t.bubbles>100&&t.animate?setTimeout(e,10*a):e();t.ctx.globalCompositeOperation=t.compose,t.ctx.fillStyle=t.gradient,requestAnimationFrame((function e(){if(null===t.cv.parentNode)return a=[],cancelAnimationFrame(e);t.animate&&requestAnimationFrame(e);t.ctx.clearRect(0,0,t.cv.width,t.cv.height),t.ctx.fillRect(0,0,t.cv.width,t.cv.height),a.forEach((e=>{t.ctx.drawImage(e.img,e.x-e.r,e.y-e.r),e.x+=Math.cos(e.a)*e.v,e.y+=Math.sin(e.a)*e.v,e.x-e.r>t.cv.width&&(e.x=-e.r),e.x+e.r<0&&(e.x=t.cv.width+e.r),e.y-e.r>t.cv.height&&(e.y=-e.r),e.y+e.r<0&&(e.y=t.cv.height+e.r)}))}))};const createImage=t=>{const e=new Image;return e.src=t.toDataURL(),e};function generateConfig(t){let e=t.canvas||(()=>{let t=document.createElement("canvas");return t.setAttribute("style","position:fixed;z-index:-1;left:0;top:0;min-width:100vw;min-height:100vh;"),t.width=window.innerWidth,t.height=window.innerHeight,document.body.appendChild(t),t})();const a=(t.gradientAngle||45)*Math.PI/180,n=Math.cos(a+Math.PI)*e.width/2+e.width/2,i=Math.sin(a+Math.PI)*e.height/2+e.height/2,h=Math.cos(a)*e.width/2+e.width/2,o=Math.sin(a)*e.height/2+e.height/2,r=Object.assign({cv:e,bubbles:Math.floor(.02*(e.width+e.height)),compose:"lighter",shadowBlur:4,shadowColor:"#fff",radiusFunc:()=>4+Math.random()*window.innerWidth/25,fillFunc:()=>`hsla(0, 0%, 100%, ${.1*Math.random()})`,angleFunc:()=>Math.random()*Math.PI*2,velocityFunc:()=>.1+.5*Math.random(),animate:!1!==t.animate,ctx:e.getContext("2d"),gradient:e.getContext("2d").createLinearGradient(n,i,h,o)},t);return r.padding=2*r.shadowBlur+2,r.gradient.addColorStop(0,t.gradientStart||"#2AE"),r.gradient.addColorStop(1,t.gradientStop||"#17B"),r}